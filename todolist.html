<html>
  <head>
    <link rel="stylesheet" href="css/todolist.css" />
    <script src="js/main.js"></script>
  </head>
  <body>
    <div class="data-div" id="opendatatable">
      <div class="div-style">
        <table class="table-div">
          <caption class="caption-style">
            Contact details
          </caption>
          <thead class="data-style">
            <tr>
              <th class="content">Name</th>
              <th class="content">Country code</th>
              <th class="content">Mobile number</th>
            </tr>
          </thead>
          <tbody class="data-style" id="addtasklist"></tbody>
        </table>
        <div class="button-div">
        <button
          onclick="document.getElementById('modal').style.display='block'"
          class="buttonFirst"
        >
          Add contacts
        </button>
        </div>
      </div>
    </div>
    <div class="main-div" id="modal">
      <div class="div">
        <h1 class="header">Enter details</h1>
        <div class="input-main-div">
          <div>
            <input
              class="input-div"
              placeholder="Enter your first name"
              id="addtaskinput"
            />
          </div>
          <div>
            <input
              class="input-div"
              placeholder="Enter yout last name"
              id="addlname"
            />
          </div>
          <div class="input-one-row">
            <input
              class="input-row"
              placeholder="Enter country code"
              id="addcountrycode"
            />
            <input
              class="input-row"
              placeholder="Enter mobile number"
              id="addnumber"
            />
          </div>
        </div>
        <button class="button" id="addtaskbtn">Submit</button>
      </div>
    </div>
    <script>
      document.getElementById("addtaskbtn").onclick = function () {
        document.getElementById("opendatatable").style.display = "block";
        document.getElementById("modal").style.display = "none";
        let datakeys = {
          fname: "",
          lname: "",
          countrycode: "",
          mobilenumber: "",
          id: "",
        };
        let addtaskinput = document.getElementById("addtaskinput").value;
        let addlname = document.getElementById("addlname").value;
        let addcountrycode = document.getElementById("addcountrycode").value;
        let addnumber = document.getElementById("addnumber").value;

        datakeys.fname = addtaskinput;
        datakeys.lname = addlname;
        datakeys.countrycode = addcountrycode;
        datakeys.mobilenumber = addnumber;
        let taskobj = [];
        let webtask = localStorage.getItem("localtask");
        if (webtask == null) {
          taskobj = [];
        } else {
          taskobj = JSON.parse(webtask);
        }
        datakeys.id = webtask.length + 1;
        taskobj.push(datakeys);
        localStorage.setItem("localtask", JSON.stringify(taskobj));
       document.getElementById("addtaskinput").value = '';
         document.getElementById("addlname").value = '';
         document.getElementById("addcountrycode").value = '';
        document.getElementById("addnumber").value = '';

        showtask();
      };
      function showtask() {
        let webtask = localStorage.getItem("localtask");
        if (webtask == null) {
          taskobj = [];
        } else {
          taskobj = JSON.parse(webtask);
        }
        let html = "";
        let addtasklist = document.getElementById("addtasklist");
        html += " <tbody class='data-style' id='addtasklist'>";

        for (var i = 0; i < taskobj.length; i++) {
          html += "<tr>";
          html +=
            "<td class='content'>" +
            taskobj[i].fname +
            " " +
            taskobj[i].lname +
            "</td>";
          html += "<td class='content'>" + taskobj[i].countrycode + "</td>";
          html += "<td class='content'>" + taskobj[i].mobilenumber + "</td>";
          html += "<button id='edittask' onclick='editupdate(taskobj[i].id)'>"
          html += "<img src='./icons/edit.png' />"
          html += "</button>"
      
          html += "<img class='delete' src='./icons/delete.png' />"

          html += "</tr>";
        }
        html += "</tbody>";

        addtasklist.innerHTML = html;
      
      }
     function editupdate (id) {
        alert(id)
        document.getElementById("modal").style.display = "block";
        document.getElementById("opendatatable").style.display = "none";
      }
    
    </script>
  </body>
</html>
